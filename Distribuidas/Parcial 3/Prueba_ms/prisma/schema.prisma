// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
  engineType = "library"
  previewFeatures = ["driverAdapters"]
}

datasource db {
  provider = "postgresql"
}

/// Modelo de Usuario - Representa a los clientes de AndesFin
model Usuario {
  id                 String       @id @default(uuid()) @db.Uuid
  nombre             String       @db.VarChar(255)
  email              String       @unique @db.VarChar(255)
  capital_disponible Decimal      @db.Decimal(10, 2)
  created_at         DateTime     @default(now())
  updated_at         DateTime     @updatedAt

  // Relaciones
  simulaciones Simulacion[]

  @@map("usuarios")
}

/// Modelo de Producto Financiero - Representa los productos de inversi贸n disponibles
model ProductoFinanciero {
  id                 String   @id @default(uuid()) @db.Uuid
  nombre             String   @db.VarChar(255)
  descripcion        String   @db.Text
  costo              Decimal  @db.Decimal(10, 2)
  porcentaje_retorno Decimal  @db.Decimal(5, 2)
  activo             Boolean  @default(true)
  created_at         DateTime @default(now())
  updated_at         DateTime @updatedAt

  @@map("productos_financieros")
}

/// Modelo de Simulaci贸n - Representa una simulaci贸n de inversi贸n realizada
model Simulacion {
  id                     String   @id @default(uuid()) @db.Uuid
  usuario_id             String   @db.Uuid
  fecha_simulacion       DateTime @default(now())
  capital_disponible     Decimal  @db.Decimal(10, 2)
  costo_total            Decimal  @db.Decimal(10, 2)
  capital_restante       Decimal  @db.Decimal(10, 2)
  ganancia_total         Decimal  @db.Decimal(10, 2)
  retorno_total_porcentaje Decimal @db.Decimal(5, 2)
  eficiencia_capital     Decimal  @db.Decimal(5, 2)
  productos_seleccionados Json
  mensaje                String   @db.Text
  created_at             DateTime @default(now())

  // Relaciones
  usuario Usuario @relation(fields: [usuario_id], references: [id], onDelete: Cascade)

  @@index([usuario_id])
  @@map("simulaciones")
}
